# 部署中央氣象署API金鑰到Render.com

## 🔑 API金鑰資訊
- **API金鑰**: `CWA-E3034BF2-AE4B-4D55-B6AA-1BDC01372CF7`
- **狀態**: ✅ 已驗證有效

## 🚀 Render.com 部署步驟

### 1. 登入Render.com控制台
- 前往：https://dashboard.render.com/
- 登入您的帳號

### 2. 進入服務設定
- 找到您的防詐騙LINE Bot服務
- 點擊服務名稱進入詳細頁面

### 3. 設定環境變數
- 點擊左側選單的「Environment」
- 點擊「Add Environment Variable」
- 設定以下變數：

```
Key: CWB_API_KEY
Value: CWA-E3034BF2-AE4B-4D55-B6AA-1BDC01372CF7
```

### 4. 儲存並重新部署
- 點擊「Save Changes」
- 系統會自動觸發重新部署
- 等待部署完成（約2-3分鐘）

## ✅ 驗證部署

### 部署完成後，測試以下功能：

1. **天氣查詢測試**：
   ```
   用戶輸入：台北天氣
   預期回應：真實的中央氣象署天氣資料
   ```

2. **日期查詢測試**：
   ```
   用戶輸入：今天日期
   預期回應：正確的台北時區日期時間
   ```

3. **檢查資料來源**：
   - 應該顯示「📡 資料來源：中央氣象署」
   - 而不是「📡 資料來源：模擬資料」

## 🔍 故障排除

### 如果仍然顯示模擬資料：

1. **檢查環境變數**：
   - 確認 `CWB_API_KEY` 已正確設定
   - 確認沒有多餘的空格或特殊字元

2. **檢查部署日誌**：
   - 在Render.com控制台查看「Logs」
   - 尋找天氣API相關的錯誤訊息

3. **手動重新部署**：
   - 點擊「Manual Deploy」
   - 選擇「Deploy latest commit」

## 📊 API使用監控

### 免費方案限制：
- **每日請求次數**：1,000次
- **每分鐘請求次數**：10次

### 監控建議：
- 定期檢查API使用量
- 如接近限制，考慮優化查詢頻率
- 必要時升級到付費方案

## 🎯 預期效果

### 設定前（模擬資料）：
```
@傑西蔡 🌤️ 台北 今日天氣
📅 2025-05-24 週六
☁️ 天氣：晴天
🌡️ 溫度：18°C - 25°C
💧 濕度：60%
☔ 降雨機率：20%
📡 資料來源：模擬資料
⚠️ 此為模擬資料，實際天氣請參考中央氣象署
```

### 設定後（真實資料）：
```
@傑西蔡 🌤️ 台北 今日天氣
📅 2025-05-24 週六
☁️ 天氣：多雲時晴
🌡️ 溫度：18°C - 25°C
💧 濕度：65%
☔ 降雨機率：20%
⏰ 時段：06:00 - 18:00
📡 資料來源：中央氣象署
⏰ 更新時間：2025-05-24 11:30:15
ℹ️ 實際天氣以中央氣象署為準
```

## 📞 技術支援

如有問題，請參考：
- `CWB_API_SETUP.md` - 完整API設定指南
- `test_real_weather_api.py` - API測試腳本
- 中央氣象署開放資料平臺：https://opendata.cwa.gov.tw/ 