# ğŸš€ ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²æŒ‡å—

## âš ï¸ é‡è¦ï¼šé—œæ–¼é–‹ç™¼ä¼ºæœå™¨è­¦å‘Š

å¦‚æœæ‚¨çœ‹åˆ°ä»¥ä¸‹è­¦å‘Šï¼š
```
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
```

é€™è¡¨ç¤ºæ‚¨æ­£åœ¨ä½¿ç”¨ Flask çš„å…§å»ºé–‹ç™¼ä¼ºæœå™¨ï¼Œ**å¿…é ˆ**åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ä½¿ç”¨ Gunicornã€‚

## ğŸ› ï¸ æ­£ç¢ºçš„éƒ¨ç½²æ–¹å¼

### 1. Render.com éƒ¨ç½²ï¼ˆæ¨è–¦ï¼‰
æˆ‘å€‘çš„ `render.yaml` å·²ç¶“é…ç½®ç‚ºä½¿ç”¨ Gunicornï¼š
```yaml
startCommand: gunicorn --config gunicorn.conf.py anti_fraud_clean_app:app
```

### 2. Heroku éƒ¨ç½²
`Procfile` å·²ç¶“é…ç½®ç‚ºä½¿ç”¨ Gunicornï¼š
```
web: gunicorn --bind 0.0.0.0:$PORT anti_fraud_clean_app:app
```

### 3. æ‰‹å‹•éƒ¨ç½²
```bash
# å®‰è£ä¾è³´
pip install -r requirements.txt

# ä½¿ç”¨ Gunicorn å•Ÿå‹•ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰
gunicorn --config gunicorn.conf.py anti_fraud_clean_app:app

# æˆ–è€…ç°¡å–®å•Ÿå‹•
gunicorn --bind 0.0.0.0:8080 anti_fraud_clean_app:app
```

### 4. é–‹ç™¼ç’°å¢ƒ
```bash
# è¨­å®šé–‹ç™¼ç’°å¢ƒ
export FLASK_ENV=development

# ç›´æ¥åŸ·è¡Œï¼ˆåƒ…é™é–‹ç™¼ï¼‰
python anti_fraud_clean_app.py
```

## ğŸ”§ Gunicorn é…ç½®èªªæ˜

æˆ‘å€‘çš„ `gunicorn.conf.py` åŒ…å«ä»¥ä¸‹å„ªåŒ–ï¼š

### æ€§èƒ½è¨­å®š
- **Workers**: æ ¹æ“š CPU æ ¸å¿ƒæ•¸è‡ªå‹•èª¿æ•´ï¼ˆæœ€å¤š4å€‹ï¼‰
- **é€£æ¥æ•¸**: æ¯å€‹ worker æœ€å¤š 1000 å€‹é€£æ¥
- **è«‹æ±‚é™åˆ¶**: æ¯å€‹ worker è™•ç† 1000 å€‹è«‹æ±‚å¾Œé‡å•Ÿ

### è¶…æ™‚è¨­å®š
- **è«‹æ±‚è¶…æ™‚**: 30 ç§’
- **Keep-alive**: 2 ç§’
- **å„ªé›…é—œé–‰**: 30 ç§’

### æ—¥èªŒè¨­å®š
- **å­˜å–æ—¥èªŒ**: è¼¸å‡ºåˆ° stdout
- **éŒ¯èª¤æ—¥èªŒ**: è¼¸å‡ºåˆ° stderr
- **æ—¥èªŒç­‰ç´š**: info

## ğŸ“Š æ€§èƒ½æ¯”è¼ƒ

| ä¼ºæœå™¨é¡å‹ | ä½µç™¼è™•ç† | ç©©å®šæ€§ | ç”Ÿç”¢é©ç”¨ |
|-----------|---------|--------|----------|
| Flask é–‹ç™¼ä¼ºæœå™¨ | âŒ ä½ | âŒ å·® | âŒ ä¸é©ç”¨ |
| Gunicorn | âœ… é«˜ | âœ… å„ªç§€ | âœ… é©ç”¨ |

## ğŸš¨ å¸¸è¦‹å•é¡Œ

### Q: ç‚ºä»€éº¼é‚„æ˜¯çœ‹åˆ°é–‹ç™¼ä¼ºæœå™¨è­¦å‘Šï¼Ÿ
A: æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š
1. ç¢ºèª `FLASK_ENV=production` ç’°å¢ƒè®Šæ•¸å·²è¨­å®š
2. ç¢ºèªä½¿ç”¨ Gunicorn å•Ÿå‹•è€Œä¸æ˜¯ç›´æ¥åŸ·è¡Œ Python æª”æ¡ˆ
3. æª¢æŸ¥éƒ¨ç½²å¹³å°çš„å•Ÿå‹•å‘½ä»¤

### Q: Gunicorn å•Ÿå‹•å¤±æ•—æ€éº¼è¾¦ï¼Ÿ
A: æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š
1. ç¢ºèª `requirements.txt` åŒ…å« `gunicorn==21.2.0`
2. æª¢æŸ¥ `gunicorn.conf.py` èªæ³•æ˜¯å¦æ­£ç¢º
3. æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒç²å–è©³ç´°ä¿¡æ¯

### Q: å¦‚ä½•ç›£æ§ Gunicorn æ€§èƒ½ï¼Ÿ
A: å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š
1. æŸ¥çœ‹ Gunicorn æ—¥èªŒ
2. ç›£æ§è¨˜æ†¶é«”å’Œ CPU ä½¿ç”¨ç‡
3. ä½¿ç”¨ APM å·¥å…·ï¼ˆå¦‚ New Relicã€DataDogï¼‰

## ğŸ” å¥åº·æª¢æŸ¥

æ·»åŠ å¥åº·æª¢æŸ¥ç«¯é»ï¼š
```python
@app.route("/health")
def health_check():
    return {
        "status": "healthy",
        "server": "gunicorn",
        "timestamp": datetime.now().isoformat()
    }
```

## ğŸ“ˆ ç›£æ§å»ºè­°

1. **è¨˜æ†¶é«”ä½¿ç”¨**: ç›£æ§ worker è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³
2. **å›æ‡‰æ™‚é–“**: ç›£æ§ API å›æ‡‰æ™‚é–“
3. **éŒ¯èª¤ç‡**: ç›£æ§ 5xx éŒ¯èª¤ç‡
4. **ä½µç™¼æ•¸**: ç›£æ§åŒæ™‚é€£æ¥æ•¸

## ğŸ”’ å®‰å…¨å»ºè­°

1. **ç’°å¢ƒè®Šæ•¸**: æ•æ„Ÿè³‡è¨Šä½¿ç”¨ç’°å¢ƒè®Šæ•¸
2. **HTTPS**: ç”Ÿç”¢ç’°å¢ƒå¿…é ˆä½¿ç”¨ HTTPS
3. **é˜²ç«ç‰†**: é™åˆ¶ä¸å¿…è¦çš„ç«¯å£å­˜å–
4. **æ—¥èªŒ**: å®šæœŸæª¢æŸ¥éŒ¯èª¤æ—¥èªŒ

---

**è¨˜ä½**: åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­**çµ•å°ä¸è¦**ä½¿ç”¨ Flask é–‹ç™¼ä¼ºæœå™¨ï¼ 